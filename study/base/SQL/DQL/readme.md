# DQL
数据查询语言，用来查询数据库中表的记录

关键字：`SELECT`
## DQL——语法/执行顺序
```mysql
SELECT
    字段列表
FROM
    表名列表
WHERE
    条件列表
GROUP BY
    分组字段列表
HAVING
    分组后条件列表
ORDER BY
    排序字段列表
LIMIT
    分页参数
```
## DQL——基本查询
1. 查询多个字段
查询部分字段数据：`SELECT 字段1, 字段2, 字段3, ... FROM 表名;`
查询所有字段数据：`SELECT * FROM 表名;`
2. 设置别名
`SELECT 字段1 [[AS] 别名], 字段2[AS 别名], ... FROM 表名;`
3. 去除重复记录
`SELECT DISTINCT 字段列表 FROM 表名;`
## DQL——条件查询（WHERE）
1. 语法
`SELECT 字段列表 FROM 表名 WHERE 条件列表;`
2. 条件

| 比较运算符               | 功能                     |
|---------------------|------------------------|
| >                   | 大于                     |
| >=                  | 大于等于                   |
| <                   | 小于                     |
| <=                  | 小于等于                   |
| =                   | 等于                     | 
| <>或!=               | 不等于                    |
| BETWEEN...AND...    | 在某个范围之内（含最小、最大值）       |
| IN(...)             | 在in之后的列表中的值，多选一        |
| LIKE 占位符            | 模糊匹配（_匹配单个字符，%匹配任意个字符） | 
| IS NULL/IS NOT NULL | 是NULL/不是NULL           |

| 逻辑运算符                | 功能             |
|----------------------|----------------|
| AND或&&               | 并且（多个条件同时成立    |
| OR或(逻辑运算符短路或，此处打不出来) | 或者（多个条件任意一个成立） |
| NOT或!                | 非，不是           |
## DQL——聚合函数（count、max、min、avg、sum）
1. 介绍：
将一列数据作为一个整体，进行纵向运算
2. 常见聚合函数：

| 函数    | 功能   |
|-------|------|
| count | 统计数量 |
| max   | 最大值  |
| min   | 最小值  |
| avg   | 平均值  |
| sum   | 求和   |
3. 语法：
`SELECT 聚合函数（字段列表） FROM 表名;`

**注意：null值不参与所有聚合函数运算**
## DQL——分组查询（GROUP BY）
1. 语法：
`SELETE 字段列表 FROM 表名 [WHERE 条件] GROUP BY 分组字段名 [HAVING 分组后过滤条件];`
2. where和having区别
- 执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤
- 判断条件不同：where不能对聚合函数进行判断，而having可以

**注意：**
- **执行顺序：where > 聚合函数 > having**
- **分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义**
## DQL——排序查询（ORDER BY）
1. 语法
`SELECT 字段列表 FROM 表名 ORDER BY 字段1 排序方式1, 字段2 排序方式2, ...;`
2. 排序方式
- ASC：升序（默认值 ）
- DESC：降序

**注意：如果是多字段排序，当第一个字段值相同是，才会根据第二个字段进行排序**
## DQL——分页查询（LIMIT）
1. 语法
`SELECT 字段列表 FROM 表名 LIMIT 起始索引，查询记录数;`

**注意**
- **起始索引从0开始，起始索引 = (查询页码 - 1) * 每页显示记录数**
- **分页查询是数据库的方言，不太的数据库有不太的实现，MySQL中是LIMIT**
- **如果查询的第一页数据胡，起始索引可以省略，总结简写为`LIMIT 查询记录数`**
## DQL——执行顺序
编写顺序
```mysql
SELECT/*第五步执行*/
    字段列表
FROM/*第一步执行*/
    表名列表
WHERE/*第二步执行*/
    条件列表
GROUP BY/*第三步执行*/
    分组字段列表
HAVING/*第四步执行*/
    分组后条件列表
ORDER BY/*第六步执行*/
    排序字段列表
LIMIT/*第七步执行*/
    分页参数
```
即执行顺序为
```mysql
FROM/*第一步执行*/
    表名列表
WHERE/*第二步执行*/
    条件列表
GROUP BY/*第三步执行*/
    分组字段列表
HAVING/*第四步执行*/
    分组后条件列表
SELECT/*第五步执行*/
    字段列表
ORDER BY/*第六步执行*/
    排序字段列表
LIMIT/*第七步执行*/
    分页参数    
```
















