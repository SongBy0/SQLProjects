# DDL
数据定义语句，用来定义数据库对象（数据库、表、字段）
## DDL——数据库操作
- 查询数据库
  - 查询所有数据库
  `SHOW DATABASES;`
  - 查询当前数据库
  `SELECT DATABASE();`
- 创建数据库
`CREATE DATABASE [IF NOT EXISTS] 数据库名 [DEFAULT CHARSET 字符集] [COLLATE 排序规则];`
- 删除数据库
`DROP DATABASE [IF EXISTS] 数据库名;`
- 使用/切换数据库
`USE 数据库名;`
## DDL——表操作
### 查询
- 查询当前数据库所有表：
`SHOW TABLES;`
- 查询表结构：
`DESC 表名;`
- 查询指定表的建表语句：
`SHOW CREATE TABLE 表名;`
### 创建
```sql
CREATE TABLE 表名(
    字段1 字段1类型 [COMMENT '字段1注解'],
    字段2 字段2类型 [COMMENT '字段2注解'],
    字段3 字段3类型 [COMMENT '字段3注解'],
    ...
    字段n 字段n类型 [COMMENT '字段n注解']/*注意：最后一个字段后面没有逗号*/
) [COMMENT '表注解'];
```
### 数据类型
MySQL中的数据类型有很多种，主要分为三类：数值类型、字符串类型、日期时间类型
- 数值类型

| 类型          | 大小      | 有符号（SIGNED）范围                                         | 无符号（UNSIGNED）范围                                  | 描述         |
|-------------|---------|-------------------------------------------------------|--------------------------------------------------|------------|
| TINYINT     | 1 byte  | (-128, 127)                                           | (0, 255)                                         | 小整数值       |
| SMALLINT    | 2 bytes | (-32768, 32767)                                       | (0, 65535)                                       | 大整数值       |
| MEDIUMINT   | 3 bytes | (-8388608, 8388607)                                   | (0, 16777215)                                    | 大整数值       |
| INT或INTEGER | 4 bytes | (-2147483648, 2147483647)                             | (0, 4294967295)                                  | 大整数值       |
| BIGINT      | 8 bytes | (-2^63, 2^63-1)                                       | (0, 2^64-1)                                      | 极大整数值      |
| FLOAT       | 4 bytes | (-3.402823466 E+38, 3.402823466351 E+38)              | 0和(1.175494351 E-38, 3.402823466 E+38)           | 单精度浮点数     |
| DOUBLE      | 8 bytes | (-1.7976931348623157 E+308, 1.7976931348623157 E+308) | 0和(2.2250738585072014, 1.7976931348623157 E+308) | 双精度浮点数     |
| DECIMAL     |         | 依赖于M（精度，即整数+小数的总位数）和D（标度，即小数位数）的值                     | 依赖于M（精度）和D（标度）的值                                 | 小数值（精确定点数） |
用例：
`age TINYINT UNSIGNED`：年龄、无负数、占用最小字节；
`score double(4,1)`：成绩、一位小数
- 字符串类型

| 类型         | 大小                 | 描述              |
|------------|--------------------|-----------------|
| CHAR       | 0-255 bytes        | 定长字符串           |
| VARCHAR    | 0-65535 bytes      | 变长字符串           |
| TINYBLOB   | 0-255 bytes        | 不超过255个字符的二进制数据 |
| TINYTEXT   | 0-255 bytes        | 短文本字符串          |
| BLOB       | 0-65535 bytes      | 二进制形式的长文本数据     |
| TEXT       | 0-65535 bytes      | 长文本数据           |
| MEDIUMBLOB | 0-16777215 bytes   | 二进制形式的中等长度文本数据  |
| MEDIUMTEXT | 0-16777215 bytes   | 中等长度文本数据        |
| LONGBLOB   | 0-4294967295 bytes | 二进制形式的极大文本数据    |
| LONGTEXT   | 0-4294967295 bytes | 极大文本数据          |
注解：
`char(10)`定长：无论该字符串内有几个字符，均占用10个字符的空间，不用计算空间、性能好；
`varchar(10)`变长：该字符串内有几个字符，就占用几个字符的空间，要计算空间、性能差

用例：
`username varchar(50)`用户名：可能输入多也可能输入少，计算空间会更好；
`gender char(1)`性别：输入固定为1，不计算空间更好

- 日期时间类型
    
| 类型        | 大小  | 范围                                        | 格式                  | 描述           |
|-----------|-----|-------------------------------------------|---------------------|--------------|
| DATE      | 3   | 1000-01-01 至 9999-12-31                   | YYYY-MM-DD          | 日期值          |
| TIME      | 3   | -838:59:59 至 838:59:59                    | HH:MM:SS            | 时间值或持续时间     |
| YEAR      | 1   | 1901 至 2155                               | YYYY                | 年份值          |
| DATETIME  | 8   | 1000-01-01 00:00:00 至 0000-12-31 23:59:59 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值     |
| TIMESTAMP | 4   | 1970-01-01 00:00:01 至 2038-01-19 03:14:07 | YYYY-MM-DD HH:MM:SS | 混合日期和时间值，时间戳 |
用例：`birthday date`生日：记录出生年月日即可

### 案例
设计一张员工表，要求如下：
1. 编号（纯数字）
2. 员工工号（字符串类型，长度不超过10位）
3. 员工姓名（字符串类型，长度不超过10位）
4. 性别（男/女，存储一个汉字）
5. 年龄（正常人年龄，不可能存储负数）
6. 身份证（二代身份证号均为18位，身份证中有x/X这样的字符）
7. 入职时间（取值年月日即可）

代码：
```sql

create table emp(
    id int comment '编号',
    work_number varchar(10) comment '工号',
    name varchar(10) comment '姓名',
    sex char(1) comment '性别',
    age tinyint unsigned comment '年龄',
    id_card char(18) comment '身份证号',
    entry_date date comment '入职时间'                
) comment '员工表';
```
### 修改
- 修改表名：
`ALTER TABLE 表名 RENAME TO 新表名;`
- 添加字段：
`ALTER TABLE 表名 ADD 字段名 类型(长度) [COMMENT '注释'] [约束];`
- 修改数据类型：
`ALTER TABLE 表名 MODIFY 字段名 新数据类型(长度);`
- 修改字段名和字段类型：
`ALTER TABLE 表名 CHANGE 旧字段名 新字段名 类型(长度) [coment '注释'] [约束];`
- 删除字段：
`ALTER TABLE 表名 DROP 字段名;`
### 删除
- 删除表:
`DROP TABLE [IF EXISTS] 表名;`
- 删除指定表，并重新创建该表（清空表中数据，仅保留字段名）：
`TRUNCATE TABLE 表名;`

## 总结
### 1 DDL——数据库操作
```sql
    SHOW DATABASES;/*查询所有数据库*/
    CREATE DATABASE 数据库名;/*创建新的数据库*/
    USE 数据库名;/*使用（切换到）数据库*/
    SELECT DATABASE();/*查询当前所在的数据库*/
    DROP DATABASE 数据库名;/*删除数据库*/
```
### 2 DDL——表操作
```sql
    SHOW TABLES;/*查询当前数据库中的所有表*/
    CREATE TABLE 表名(
        字段 字段类型,
        字段 字段类型
    );/*新建表并创建字段*/
    DESC 表名;/*查询该表中的所有字段名*/
    SHOW CREATE TABLE 表名;/*查询创建表时使用的建表语句*/
    ALTER TABLE 表名 ADD/MODIFY/CHANGE/DROP/RENAME TO/... ;/*在该表中添加字段/修改字段类型/修改字段名和类型/删除字段/修改表名/... */
    DROP TABLE 表名;/*删除该表*/
```
**注：以上命令的方括号中的其中语句皆为可选参数，语句皆以分号结尾**